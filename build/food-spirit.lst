                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : FreeWare ANSI-C Compiler
                              3 ; Version 2.3.1 Sun Feb 12 12:28:49 2017
                              4 
                              5 ;--------------------------------------------------------
                              6 	.module lcc35610
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _initialize
                             13 	.globl _init_player
                             14 	.globl _game_loop
                             15 	.globl _draw_player
                             16 	.globl _read_controls
                             17 	.globl _player_y
                             18 	.globl _player_x
                             19 	.globl _PLAYER_SPR_BOT_PAL
                             20 	.globl _PLAYER_SPR_TOP_PAL
                             21 	.globl _PLAYER_SPR_BOT_DATA
                             22 	.globl _PLAYER_SPR_TOP_DATA
                             23 ;--------------------------------------------------------
                             24 ; special function registers
                             25 ;--------------------------------------------------------
                             26 ;--------------------------------------------------------
                             27 ; special function bits 
                             28 ;--------------------------------------------------------
                             29 ;--------------------------------------------------------
                             30 ; internal ram data
                             31 ;--------------------------------------------------------
                             32 	.area _DATA
   0000                      33 _player_x::
   0000                      34 	.ds 1
   0001                      35 _player_y::
   0001                      36 	.ds 1
                             37 ;--------------------------------------------------------
                             38 ; overlayable items in internal ram 
                             39 ;--------------------------------------------------------
                             40 	.area _OVERLAY
                             41 ;--------------------------------------------------------
                             42 ; indirectly addressable internal ram data
                             43 ;--------------------------------------------------------
                             44 	.area _ISEG
                             45 ;--------------------------------------------------------
                             46 ; bit data
                             47 ;--------------------------------------------------------
                             48 	.area _BSEG
                             49 ;--------------------------------------------------------
                             50 ; external ram data
                             51 ;--------------------------------------------------------
                             52 	.area _XSEG
                             53 ;--------------------------------------------------------
                             54 ; global & static initialisations
                             55 ;--------------------------------------------------------
                             56 	.area _GSINIT
                             57 	.area _GSFINAL
                             58 	.area _GSINIT
                             59 ;--------------------------------------------------------
                             60 ; Home
                             61 ;--------------------------------------------------------
                             62 	.area _HOME
                             63 	.area _CODE
                             64 ;--------------------------------------------------------
                             65 ; code
                             66 ;--------------------------------------------------------
                             67 	.area _CODE
                             68 ;	src/food-spirit.c 15
                             69 ;	genLabel
                             70 ;	genFunction
                             71 ;	---------------------------------
                             72 ; Function read_controls
                             73 ; ---------------------------------
   0000                      74 ___read_controls_start:
   0000                      75 _read_controls:
                             76 	
                             77 ;	src/food-spirit.c 16
                             78 ;	genCall
                             79 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0000 CD 00 00             80 	call	_joypad
   0003 4B                   81 	ld	c,e
                             82 ;	genAssign
                             83 ;	(registers are the same)
                             84 ;	src/food-spirit.c 18
                             85 ;	genAnd
   0004 79                   86 	ld	a,c
   0005 E6 04                87 	and	a,#0x04
   0007 20 03                88 	jr	nz,00115$
   0009 C3 10 00             89 	jp	00102$
   000C                      90 00115$:
                             91 ;	src/food-spirit.c 19
                             92 ;	genMinus
                             93 ;	AOP_HL for _player_y
   000C 21 01 00             94 	ld	hl,#_player_y
   000F 35                   95 	dec	(hl)
                             96 ;	genLabel
   0010                      97 00102$:
                             98 ;	src/food-spirit.c 21
                             99 ;	genAnd
   0010 79                  100 	ld	a,c
   0011 E6 08               101 	and	a,#0x08
   0013 20 03               102 	jr	nz,00116$
   0015 C3 1C 00            103 	jp	00104$
   0018                     104 00116$:
                            105 ;	src/food-spirit.c 22
                            106 ;	genPlus
                            107 ;	AOP_HL for _player_y
                            108 ;	genPlusIncr
   0018 21 01 00            109 	ld	hl,#_player_y
   001B 34                  110 	inc	(hl)
                            111 ;	genLabel
   001C                     112 00104$:
                            113 ;	src/food-spirit.c 24
                            114 ;	genAnd
   001C 79                  115 	ld	a,c
   001D E6 01               116 	and	a,#0x01
   001F 20 03               117 	jr	nz,00117$
   0021 C3 28 00            118 	jp	00106$
   0024                     119 00117$:
                            120 ;	src/food-spirit.c 25
                            121 ;	genPlus
                            122 ;	AOP_HL for _player_x
                            123 ;	genPlusIncr
   0024 21 00 00            124 	ld	hl,#_player_x
   0027 34                  125 	inc	(hl)
                            126 ;	genLabel
   0028                     127 00106$:
                            128 ;	src/food-spirit.c 27
                            129 ;	genAnd
   0028 79                  130 	ld	a,c
   0029 E6 02               131 	and	a,#0x02
   002B 20 03               132 	jr	nz,00118$
   002D C3 34 00            133 	jp	00109$
   0030                     134 00118$:
                            135 ;	src/food-spirit.c 28
                            136 ;	genMinus
                            137 ;	AOP_HL for _player_x
   0030 21 00 00            138 	ld	hl,#_player_x
   0033 35                  139 	dec	(hl)
                            140 ;	genLabel
   0034                     141 00109$:
                            142 ;	genEndFunction
                            143 	
   0034 C9                  144 	ret
   0035                     145 ___read_controls_end:
   0035                     146 _PLAYER_SPR_TOP_DATA:
   0035 00                  147 	.db #0x00
   0036 18                  148 	.db #0x18
   0037 18                  149 	.db #0x18
   0038 66                  150 	.db #0x66
   0039 7E                  151 	.db #0x7E
   003A A5                  152 	.db #0xA5
   003B 7E                  153 	.db #0x7E
   003C A5                  154 	.db #0xA5
   003D 3C                  155 	.db #0x3C
   003E 42                  156 	.db #0x42
   003F 00                  157 	.db #0x00
   0040 3C                  158 	.db #0x3C
   0041 00                  159 	.db #0x00
   0042 3C                  160 	.db #0x3C
   0043 00                  161 	.db #0x00
   0044 5A                  162 	.db #0x5A
   0045                     163 _PLAYER_SPR_BOT_DATA:
   0045 00                  164 	.db #0x00
   0046 5A                  165 	.db #0x5A
   0047 00                  166 	.db #0x00
   0048 5A                  167 	.db #0x5A
   0049 18                  168 	.db #0x18
   004A 42                  169 	.db #0x42
   004B 18                  170 	.db #0x18
   004C 00                  171 	.db #0x00
   004D 24                  172 	.db #0x24
   004E 00                  173 	.db #0x00
   004F 24                  174 	.db #0x24
   0050 00                  175 	.db #0x00
   0051 42                  176 	.db #0x42
   0052 00                  177 	.db #0x00
   0053 00                  178 	.db #0x00
   0054 42                  179 	.db #0x42
   0055                     180 _PLAYER_SPR_TOP_PAL:
   0055 00 00               181 	.dw #0x0000
   0057 34 46               182 	.dw #0x4634
   0059 00 00               183 	.dw #0x0000
   005B A5 20               184 	.dw #0x20A5
   005D                     185 _PLAYER_SPR_BOT_PAL:
   005D 00 00               186 	.dw #0x0000
   005F 00 7C               187 	.dw #0x7C00
   0061 00 00               188 	.dw #0x0000
   0063 00 00               189 	.dw #0x0000
                            190 ;	src/food-spirit.c 31
                            191 ;	genLabel
                            192 ;	genFunction
                            193 ;	---------------------------------
                            194 ; Function draw_player
                            195 ; ---------------------------------
   0065                     196 ___draw_player_start:
   0065                     197 _draw_player:
                            198 	
                            199 ;	src/food-spirit.c 32
                            200 ;	genIpush
                            201 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                            202 ;	AOP_HL for _player_y
   0065 21 01 00            203 	ld	hl,#_player_y
   0068 7E                  204 	ld	a,(hl)
   0069 F5                  205 	push	af
   006A 33                  206 	inc	sp
                            207 ;	genIpush
                            208 ;	AOP_HL for _player_x
   006B 21 00 00            209 	ld	hl,#_player_x
   006E 7E                  210 	ld	a,(hl)
   006F F5                  211 	push	af
   0070 33                  212 	inc	sp
                            213 ;	genIpush
   0071 3E 01               214 	ld	a,#0x01
   0073 F5                  215 	push	af
   0074 33                  216 	inc	sp
                            217 ;	genCall
   0075 CD 00 00            218 	call	_move_sprite
   0078 E8 03               219 	lda	sp,3(sp)
                            220 ;	src/food-spirit.c 33
                            221 ;	genMinus
                            222 ;	AOP_HL for _player_y
   007A 21 01 00            223 	ld	hl,#_player_y
   007D 7E                  224 	ld	a,(hl)
   007E C6 F8               225 	add	a,#0xF8
                            226 ;	genIpush
                            227 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0080 4F                  228 	ld	c,a
   0081 F5                  229 	push	af
   0082 33                  230 	inc	sp
                            231 ;	genIpush
                            232 ;	AOP_HL for _player_x
   0083 21 00 00            233 	ld	hl,#_player_x
   0086 7E                  234 	ld	a,(hl)
   0087 F5                  235 	push	af
   0088 33                  236 	inc	sp
                            237 ;	genIpush
   0089 3E 00               238 	ld	a,#0x00
   008B F5                  239 	push	af
   008C 33                  240 	inc	sp
                            241 ;	genCall
   008D CD 00 00            242 	call	_move_sprite
   0090 E8 03               243 	lda	sp,3(sp)
                            244 ;	genLabel
   0092                     245 00101$:
                            246 ;	genEndFunction
                            247 	
   0092 C9                  248 	ret
   0093                     249 ___draw_player_end:
                            250 ;	src/food-spirit.c 36
                            251 ;	genLabel
                            252 ;	genFunction
                            253 ;	---------------------------------
                            254 ; Function game_loop
                            255 ; ---------------------------------
   0093                     256 ___game_loop_start:
   0093                     257 _game_loop:
                            258 	
                            259 ;	src/food-spirit.c 37
                            260 ;	genCall
                            261 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0093 CD 00 00            262 	call	_read_controls
                            263 ;	src/food-spirit.c 38
                            264 ;	genCall
                            265 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0096 CD 65 00            266 	call	_draw_player
                            267 ;	genLabel
   0099                     268 00101$:
                            269 ;	genEndFunction
                            270 	
   0099 C9                  271 	ret
   009A                     272 ___game_loop_end:
                            273 ;	src/food-spirit.c 41
                            274 ;	genLabel
                            275 ;	genFunction
                            276 ;	---------------------------------
                            277 ; Function init_player
                            278 ; ---------------------------------
   009A                     279 ___init_player_start:
   009A                     280 _init_player:
                            281 	
                            282 ;	src/food-spirit.c 42
                            283 ;	genAssign
                            284 ;	AOP_HL for _player_x
   009A 21 00 00            285 	ld	hl,#_player_x
   009D 36 28               286 	ld	(hl),#0x28
                            287 ;	src/food-spirit.c 43
                            288 ;	genAssign
                            289 ;	AOP_HL for _player_y
   009F 21 01 00            290 	ld	hl,#_player_y
   00A2 36 28               291 	ld	(hl),#0x28
                            292 ;	src/food-spirit.c 45
                            293 ;	genIpush
                            294 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00A4 21 55 00            295 	ld	hl,#_PLAYER_SPR_TOP_PAL
   00A7 E5                  296 	push	hl
                            297 ;	genIpush
   00A8 21 35 00            298 	ld	hl,#_PLAYER_SPR_TOP_DATA
   00AB E5                  299 	push	hl
                            300 ;	genIpush
   00AC 21 00 00            301 	ld	hl,#0x0000
   00AF E5                  302 	push	hl
                            303 ;	genIpush
   00B0 21 00 00            304 	ld	hl,#0x0000
   00B3 E5                  305 	push	hl
                            306 ;	genIpush
   00B4 21 00 00            307 	ld	hl,#0x0000
   00B7 E5                  308 	push	hl
                            309 ;	genCall
   00B8 CD 00 00            310 	call	_set_up_sprite
   00BB E8 0A               311 	lda	sp,10(sp)
                            312 ;	src/food-spirit.c 46
                            313 ;	genIpush
                            314 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00BD 21 5D 00            315 	ld	hl,#_PLAYER_SPR_BOT_PAL
   00C0 E5                  316 	push	hl
                            317 ;	genIpush
   00C1 21 45 00            318 	ld	hl,#_PLAYER_SPR_BOT_DATA
   00C4 E5                  319 	push	hl
                            320 ;	genIpush
   00C5 21 01 00            321 	ld	hl,#0x0001
   00C8 E5                  322 	push	hl
                            323 ;	genIpush
   00C9 21 01 00            324 	ld	hl,#0x0001
   00CC E5                  325 	push	hl
                            326 ;	genIpush
   00CD 21 01 00            327 	ld	hl,#0x0001
   00D0 E5                  328 	push	hl
                            329 ;	genCall
   00D1 CD 00 00            330 	call	_set_up_sprite
   00D4 E8 0A               331 	lda	sp,10(sp)
                            332 ;	genLabel
   00D6                     333 00101$:
                            334 ;	genEndFunction
                            335 	
   00D6 C9                  336 	ret
   00D7                     337 ___init_player_end:
                            338 ;	src/food-spirit.c 49
                            339 ;	genLabel
                            340 ;	genFunction
                            341 ;	---------------------------------
                            342 ; Function initialize
                            343 ; ---------------------------------
   00D7                     344 ___initialize_start:
   00D7                     345 _initialize:
   00D7 E8 FD               346 	lda	sp,-3(sp)
                            347 ;	src/food-spirit.c 50
                            348 ;	genCall
                            349 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00D9 CD 00 00            350 	call	_cgb_compatibility
                            351 ;	src/food-spirit.c 52
                            352 ;	genCall
                            353 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00DC CD 9A 00            354 	call	_init_player
                            355 ;	src/food-spirit.c 54
                            356 ;	genAssign
   00DF 01 40 FF            357 	ld	bc,#0xFF40
                            358 ;	genAssign
                            359 ;	AOP_STK for _initialize_sloc0_1_0
   00E2 F8 01               360 	lda	hl,1(sp)
   00E4 36 40               361 	ld	(hl),#0x40
   00E6 23                  362 	inc	hl
   00E7 36 FF               363 	ld	(hl),#0xFF
                            364 ;	genPointerGet
                            365 ;	AOP_STK for _initialize_sloc0_1_0
                            366 ;	AOP_STK for _initialize_sloc1_1_0
   00E9 2B                  367 	dec	hl
   00EA 5E                  368 	ld	e,(hl)
   00EB 23                  369 	inc	hl
   00EC 56                  370 	ld	d,(hl)
   00ED 1A                  371 	ld	a,(de)
   00EE 2B                  372 	dec	hl
   00EF 2B                  373 	dec	hl
                            374 ;	genOr
                            375 ;	AOP_STK for _initialize_sloc1_1_0
   00F0 77                  376 	ld      (hl),a
   00F1 7F                  377 	ld      a,a
   00F2 F6 02               378 	or	a,#0x02
                            379 ;	genAssign (pointer)
   00F4 02                  380 	ld	(bc),a
                            381 ;	genLabel
   00F5                     382 00101$:
                            383 ;	genEndFunction
   00F5 E8 03               384 	lda	sp,3(sp)
   00F7 C9                  385 	ret
   00F8                     386 ___initialize_end:
                            387 ;	src/food-spirit.c 57
                            388 ;	genLabel
                            389 ;	genFunction
                            390 ;	---------------------------------
                            391 ; Function main
                            392 ; ---------------------------------
   00F8                     393 ___main_start:
   00F8                     394 _main:
                            395 	
                            396 ;	src/food-spirit.c 58
                            397 ;	genCall
                            398 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00F8 CD D7 00            399 	call	_initialize
                            400 ;	src/food-spirit.c 60
                            401 ;	genLabel
   00FB                     402 00102$:
                            403 ;	src/food-spirit.c 61
                            404 ;	genCall
                            405 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00FB CD 00 00            406 	call	_wait_vbl_done
                            407 ;	src/food-spirit.c 62
                            408 ;	genCall
                            409 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00FE CD 93 00            410 	call	_game_loop
                            411 ;	genGoto
   0101 C3 FB 00            412 	jp	00102$
                            413 ;	genLabel
   0104                     414 00104$:
                            415 ;	genEndFunction
                            416 	
   0104 C9                  417 	ret
   0105                     418 ___main_end:
                            419 	.area _CODE
ASxxxx Assembler V01.75  (GameBoy Z80-like CPU), page 1.

Symbol Table

  0 _PLAYER_SPR_BOT_DATA               0045 GR
  0 _PLAYER_SPR_BOT_PAL                005D GR
  0 _PLAYER_SPR_TOP_DATA               0035 GR
  0 _PLAYER_SPR_TOP_PAL                0055 GR
  0 ___draw_player_end                 0093 R
  0 ___draw_player_start               0065 R
  0 ___game_loop_end                   009A R
  0 ___game_loop_start                 0093 R
  0 ___init_player_end                 00D7 R
  0 ___init_player_start               009A R
  0 ___initialize_end                  00F8 R
  0 ___initialize_start                00D7 R
  0 ___main_end                        0105 R
  0 ___main_start                      00F8 R
  0 ___read_controls_end               0035 R
  0 ___read_controls_start             0000 R
    _cgb_compatibility                 **** GX
  0 _draw_player                       0065 GR
  0 _game_loop                         0093 GR
  0 _init_player                       009A GR
  0 _initialize                        00D7 GR
    _joypad                            **** GX
  0 _main                              00F8 GR
    _move_sprite                       **** GX
  1 _player_x                          0000 GR
  1 _player_y                          0001 GR
  0 _read_controls                     0000 GR
    _set_up_sprite                     **** GX
    _wait_vbl_done                     **** GX

ASxxxx Assembler V01.75  (GameBoy Z80-like CPU), page 2.

Area Table

   0 _CODE                              size  105   flags 0
   1 _DATA                              size    2   flags 0
   2 _OVERLAY                           size    0   flags 0
   3 _ISEG                              size    0   flags 0
   4 _BSEG                              size    0   flags 0
   5 _XSEG                              size    0   flags 0
   6 _GSINIT                            size    0   flags 0
   7 _GSFINAL                           size    0   flags 0
   8 _HOME                              size    0   flags 0
